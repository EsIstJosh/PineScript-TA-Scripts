//@version=4
//By EsIstTurnt
study(title="Relative Value Comparison V2", shorttitle="RVC",scale=scale.left, overlay=false)
transparency = input(title="Transparency", defval=20, type=input.integer, maxval=100, minval=0)
linewidth = input(title="Line Plot Width", defval=2, type=input.integer, maxval=4, minval=1)
shortsetback = input(title="ShortMA Setback", defval=0, type=input.integer,maxval=1024,minval=0)
longsetback = input(title="LongMA Setback", defval=32, type=input.integer,maxval=1024,minval=4)
shortma = input(title="ShortMA Length", defval=8, type=input.integer,maxval=512,minval=1)
longma = input(title="LongMA Length", defval=256, type=input.integer,maxval=1024,minval=2)
shortmama = input(title="ShortMAMA Length", defval=32, type=input.integer,maxval=1024,minval=1)
longmama = input(title="LongMAMA Length", defval=128, type=input.integer,maxval=1024,minval=2)
shortsource = input(title="Short Source", defval=close, type=input.source)
longsource = input(title="Long Source", defval=close, type=input.source)
res1 = input(title="Short Resolution", defval="1D", type=input.resolution)
res2 = input(title="Long Resolution", defval="1D", type=input.resolution)
currentsym = syminfo.tickerid
sym1  = input(title="Sym1 ",type=input.symbol, defval="DJI")
sym2  = input(title="Sym2 ",type=input.symbol, defval="SPX")
sym3  = input(title="Sym3 ",type=input.symbol, defval="NDQ")
sym4  = input(title="Sym4 ",type=input.symbol, defval="XAGUSD")
sym5  = input(title="Sym5 ",type=input.symbol, defval="XAUUSD")
sym6  = input(title="Sym6 ",type=input.symbol, defval="VIX")
sym7  = input(title="Sym7 ",type=input.symbol, defval="US10Y")
sym8  = input(title="Sym8 ",type=input.symbol, defval="USOIL")
currentma = ema(security(currentsym, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(currentsym,res2,wma(longsource[longsetback],longma)),longmama)
ma1 = ema(security(sym1, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym1,res2,wma(longsource[longsetback],longma)),longmama)
ma2 = ema(security(sym2, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym2,res2,wma(longsource[longsetback],longma)),longmama)
ma3 = ema(security(sym3, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym3,res2,wma(longsource[longsetback],longma)),longmama)
ma4 = ema(security(sym4, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym4,res2,wma(longsource[longsetback],longma)),longmama)
ma5 = ema(security(sym5, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym5,res2,wma(longsource[longsetback],longma)),longmama)
ma6 = ema(security(sym6, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym6,res2,wma(longsource[longsetback],longma)),longmama)
ma7 = ema(security(sym7, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym7,res2,wma(longsource[longsetback],longma)),longmama)
ma8 = ema(security(sym8, res1, wma(shortsource[shortsetback],shortma)),shortmama)/ema(security(sym8,res2,wma(longsource[longsetback],longma)),longmama)
plot(ma1,title="sym1",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=#ff0000)
plot(ma2,title="sym2",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=color.blue)
plot(ma3,title="sym3",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=color.teal)
plot(ma4,title="sym4",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=color.gray)
plot(ma5,title="sym1",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=color.yellow)
plot(ma6,title="sym2",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=color.orange)
plot(ma7,title="sym3",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=color.white)
plot(ma8,title="sym4",linewidth=linewidth,transp=transparency,histbase=1, style=plot.style_linebr,color=color.purple)
plot(currentma,title="Current Symbol",linewidth=linewidth+1,transp=transparency,histbase=1, style=plot.style_linebr,color=color.fuchsia)
h1 = hline(2)
h2 = hline(1.33)
h3 = hline(0.66)
h4 = hline(0)
fill(h1, h2,color=color.red)
fill(h3, h4,color=color.green)

